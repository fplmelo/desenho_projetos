---
title: "Introdução Básica ao R e RStudio"
subtitle: "BO304"
author: "Felipe Melo"
date: "last-modified"
date-format: "long"
format:
  html:
    toc: true
---

Tempo aproximado: 15 minutos

## Objetivos de Aprendizagem

- Descrever o R e o RStudio.
- Interagir com o R usando o RStudio.
- Utilizar os diversos recursos do RStudio.

## O que é R?

Um equívoco comum é pensar que o R é uma linguagem de programação, mas na verdade ele é muito mais do que isso. Pense no R como um ambiente para computação estatística e gráficos, que reúne diversos recursos para fornecer funcionalidades poderosas.

O ambiente R combina:

- manuseio eficiente de grandes volumes de dados  
- coleção de ferramentas integradas  
- recursos gráficos  
- linguagem de programação simples e eficaz  

## Por que usar R?

<img src="../img/why_R.png" width="600"/>

R é um ambiente poderoso e extensível. Ele possui uma ampla variedade de capacidades para estatística, análise geral de dados e visualização.

- Manipulação, organização e armazenamento de dados  
- Ampla variedade de métodos estatísticos e técnicas gráficas disponíveis  
- Fácil de instalar em qualquer plataforma e de usar (e é gratuito!)  
- Código aberto com uma comunidade grande e em constante crescimento  

## O que é o RStudio?

O RStudio é um Ambiente de Desenvolvimento Integrado (IDE) de código aberto e disponível gratuitamente. O RStudio fornece um ambiente com muitos recursos que tornam o uso do R mais fácil e é uma excelente alternativa ao uso do R diretamente no terminal.

<img src="../img/rstudio_logo.png" width="300"/>

- Interface gráfica, não apenas um prompt de comando  
- Excelente ferramenta de aprendizado  
- Gratuito para uso acadêmico  
- Independente de plataforma  
- Código aberto  

## Criando um novo diretório de projeto no RStudio

Vamos criar um novo diretório de projeto para a aula de hoje, **Introdução ao R**.

1. Abra o RStudio  
2. Vá ao menu `File` e selecione `New Project`.  
3. Na janela `New Project`, escolha `New Directory`. Em seguida, escolha `New Project`. Nomeie o novo diretório como `Intro-to-R` e, em “Create the project as subdirectory of:”, selecione a Área de Trabalho (Desktop) ou outro local de sua preferência.  
4. Clique em `Create Project`.

<p align="center">

<img src="../img/Opening_Project.gif" width="900"/>

</p>

5. Após o projeto ser criado, caso ele não seja aberto automaticamente no RStudio, vá ao menu `File`, selecione `Open Project` e escolha `Intro-to-R.Rproj`.  
6. Quando o RStudio abrir, você verá três painéis na janela.  
7. Vá ao menu `File`, selecione `New File` e depois `R Script`.  
8. Vá ao menu `File`, selecione `Save As...`, digite `Intro-to-R.R` e clique em `Save`.

<p align="center">

<img src="../img/Opening_RScript.gif" width="900"/>

</p>

A interface do RStudio agora deve se parecer com a imagem abaixo.

![Interface do RStudio](../img/Rstudio_interface.png)

## Interface do RStudio

**A interface do RStudio possui quatro painéis principais:**

1. **Console**: onde você pode digitar comandos e ver as saídas. *O console é tudo o que você veria se executasse o R pela linha de comando sem o RStudio.*  
2. **Editor de scripts**: onde você pode digitar comandos e salvá-los em arquivos. Você também pode enviar os comandos para execução no console.  
3. **Environment/History**: o ambiente mostra todos os objetos ativos e o histórico mantém o registro de todos os comandos executados no console.  
4. **Files/Plots/Packages/Help**

## Organizando seu diretório de trabalho e configuração inicial

### Visualizando seu diretório de trabalho

Antes de organizarmos nosso diretório de trabalho, vamos verificar onde ele está localizado digitando no console:

`getwd()`

Seu diretório de trabalho deve ser a pasta `Intro-to-R` criada quando você criou o projeto. O diretório de trabalho é onde o RStudio irá procurar automaticamente por arquivos importados e onde ele salvará automaticamente os arquivos criados, a menos que seja especificado o contrário.

Você pode visualizar seu diretório de trabalho selecionando a aba `Files` na janela **Files/Plots/Packages/Help**.

<p align="center">

<img src="../img/Get_wd.png" width="400"/>

</p>

Se você quiser escolher um diretório diferente como diretório de trabalho, navegue até outra pasta na aba `Files`, clique no menu suspenso `More` e selecione `Set As Working Directory`.

<p align="center">

<img src="../img/Set_wd.png" width="400"/>

</p>

### Estruturando seu diretório de trabalho

Para organizar seu diretório de trabalho para uma análise específica, você deve separar os dados originais (dados brutos) dos conjuntos de dados intermediários. Por exemplo, você pode criar um diretório `data/` para armazenar os dados brutos, um diretório `results/` para conjuntos de dados intermediários e um diretório `figures/` para os gráficos que serão gerados.

<p align="center">

<img src="../img/Add_Rstudio_folder.gif" width="900"/>

</p>

Crie esses três diretórios dentro do seu diretório de trabalho clicando em `New Folder` na aba `Files`.

Ao finalizar, seu diretório de trabalho deverá se parecer com:

<p align="center">

<img src="../img/Complete_wd_setup.png" width="400"/>

</p>

### Adicionando arquivos ao seu diretório de trabalho

Existem alguns arquivos que serão utilizados nas próximas aulas, e você pode acessá-los usando os links abaixo. Clique com o botão direito no link e selecione “Salvar link como…”. Escolha `~/Desktop/Intro-to-R/data` como destino. **Esses arquivos serão discutidos mais adiante na aula.**

- Baixe o **arquivo de contagens normalizadas** clicando com o botão direito em [este link](https://raw.githubusercontent.com/hbctraining/Training-modules/master/IntroR/data/counts.rpkm.csv)  
- Baixe o **arquivo de metadados** usando [este link](https://raw.githubusercontent.com/hbctraining/Training-modules/master/IntroR/data/mouse_exp_design.csv)

> *NOTA:* Se os arquivos forem baixados automaticamente para outro local do seu computador, você pode movê-los para o diretório de trabalho usando o explorador de arquivos (fora do RStudio) ou navegando até eles pela aba `Files` no painel inferior direito do RStudio.

### Configuração inicial

Esta é uma tarefa de organização. Vamos escrever linhas longas de código no editor de scripts e queremos garantir que as linhas sejam quebradas automaticamente, evitando a necessidade de rolar horizontalmente para visualizar todo o código.

Clique em **Code** no topo da tela do RStudio e selecione **Soft Wrap Long Lines** no menu suspenso.

<p align="center">

<img src="../img/Soft_wrap.gif" width="600"/>

</p>

## Interagindo com o R

Agora que a interface e a estrutura de diretórios estão configuradas, vamos começar a usar o R! Existem **duas formas principais** de interagir com o R no RStudio: usando o **console** ou o **editor de scripts** (arquivos de texto simples que contêm seu código).

### Janela do console

A **janela do console** (painel inferior esquerdo) é onde o R aguarda comandos e exibe os resultados. Comandos digitados diretamente no console serão perdidos quando a sessão for encerrada.

Vamos testar:

`3 + 5`

<p align="center">

<img src="../img/Console.png" width="400"/>

</p>

### Editor de scripts

A melhor prática é inserir os comandos no **editor de scripts** e salvar o script. Recomenda-se comentar amplamente os comandos usando `#`, garantindo um registro completo do que foi feito.

**O editor de scripts do RStudio permite enviar a linha atual ou o texto selecionado para o console do R clicando no botão `Run` no canto superior direito do editor**, ou usando o atalho `Ctrl + Enter`.


<p align="center">

<img src="../img/Run_script_1.gif" width="700"/>

</p>

Como alternativa, você pode executar pressionando `Ctrl` + `Return/Enter`.

<p align="center">

<img src="../img/Run_script_2.gif" width="700"/>

</p>

O comando será executado no console e o resultado exibido.

<p align="center">

<img src="../img/Script_editor_output.png" width="400"/>

</p>

O que acontece se executarmos o mesmo comando sem o símbolo de comentário `#`?

I am adding 3 and 5. R is fun!

`3 + 5`

Agora o R tenta interpretar essa frase como um comando, o que resulta em erro. O console exibirá: *"Error: unexpected symbol in 'I am'"*, indicando que o interpretador do R não reconheceu o comando.

### Prompt de comando do console

Interpretar o prompt do console ajuda a entender quando o R está pronto para aceitar comandos:

**Console pronto para aceitar comandos**: `>`  

Quando o console exibe `>`, o R está aguardando novos comandos.

**Console aguardando mais dados**: `+`  

Indica que o comando ainda não foi concluído, geralmente por parênteses ou aspas não fechados.

**Interrompendo um comando**: `esc`  

Clique no console e pressione `esc` para cancelar o comando atual e retornar ao prompt `>`.

## Boas práticas

Antes de avançar para conceitos mais complexos, destacamos algumas boas práticas ao trabalhar com R:

- Código e fluxo de trabalho tornam-se mais reprodutíveis quando tudo é documentado. **Todo o código deve ser escrito no editor de scripts e salvo em arquivos**, em vez de ser executado apenas no console.  
- O **console do R** deve ser usado principalmente para inspeção de objetos, testes rápidos e obtenção de ajuda.  
- Use `#` para comentar. **Comente de forma abundante** nos scripts. Um atalho útil é `Ctrl + Shift + C` para comentar blocos inteiros.

------------------------------------------------------------------------

*Esta aula foi desenvolvida por membros da equipe do [Harvard Chan Bioinformatics Core (HBC)](http://bioinformatics.sph.harvard.edu/). Material de acesso aberto distribuído sob a licença [Creative Commons Attribution](https://creativecommons.org/licenses/by/4.0/) (CC BY 4.0).*

- *Os materiais utilizados nesta aula foram adaptados de trabalhos do Data Carpentry (http://datacarpentry.org/), disponibilizados sob a licença [Creative Commons Attribution](https://creativecommons.org/licenses/by/4.0/) (CC BY 4.0).*
