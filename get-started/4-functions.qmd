---
title: "Funções em R"
subtitle: "BO304"
author: "Felipe Melo"
date: "last-modified"
date-format: "long"
format:
  html:
    toc: true
---

Tempo aproximado: 60 min

## Objetivos de Aprendizagem

- Descrever o que são funções em R.
- Usar funções integradas do R.
- Entender argumentos de funções.
- Escrever funções simples em R.

## O que são funções?

Uma característica fundamental do R é o uso extensivo de **funções**. Funções são blocos de código que executam uma tarefa específica. Elas permitem reutilizar código, tornando seus scripts mais curtos, claros e fáceis de manter.

Uma função:
- Recebe **entradas** (argumentos)
- Executa um conjunto de instruções
- Retorna um **resultado**

![função](../img/function.png)

## Usando funções integradas

O R vem com milhares de funções integradas. Você já utilizou várias delas, mesmo sem perceber.

Por exemplo:

```{r}
sqrt(16)
```

A função `sqrt()` recebe o argumento `16` e retorna a raiz quadrada.

```{r}
round(3.14159, 2)
```

Aqui, `round()` recebe dois argumentos:
- o número
- o número de casas decimais

## Argumentos de funções

Funções podem ter **argumentos obrigatórios** e **opcionais**.

```{r}
log(100)
```

Por padrão, o logaritmo é calculado na base *e*. Podemos alterar isso:

```{r}
log(100, base = 10)
```

Também podemos especificar argumentos **nomeados** em qualquer ordem:

```{r}
log(base = 10, x = 100)
```

## Obtendo ajuda sobre funções

Existem várias formas de obter ajuda em R:

```{r}
?log
```

ou

```{r}
help(log)
```

Também é possível usar:

```{r}
args(log)
```

Para ver os argumentos aceitos por uma função.

## Funções aplicadas a vetores

Muitas funções em R são **vetorizadas**, ou seja, operam elemento a elemento em vetores.

```{r}
numbers <- c(1, 4, 9, 16)
sqrt(numbers)
```

## Escrevendo suas próprias funções

Você pode criar suas próprias funções usando a função `function()`.

Estrutura básica:

```{r}
nome_da_funcao <- function(argumentos) {
  # código
  return(resultado)
}
```

### Exemplo simples

```{r}
square <- function(x) {
  x^2
}

square(4)
```

### Função com múltiplos argumentos

```{r}
power <- function(base, exponent = 2) {
  base^exponent
}

power(3)
power(3, 3)
```

## Escopo de funções

Variáveis criadas dentro de uma função existem **apenas dentro dela**.

```{r}
test_scope <- function() {
  x <- 10
  x
}

test_scope()
```

```{r}
#| eval: false
#| include: false
x
```

O segundo comando gera erro, pois `x` não existe fora da função.

## Boas práticas ao escrever funções

- Use nomes claros e descritivos
- Documente com comentários
- Faça uma função realizar **uma única tarefa**
- Teste com diferentes entradas

## Exercício

Crie uma função chamada `mean_diff` que:
- Receba dois vetores numéricos
- Retorne a diferença entre suas médias

```{r}
mean_diff <- function(x, y) {
  mean(x) - mean(y)
}

mean_diff(c(1, 2, 3), c(4, 5, 6))
```

---

*Este material foi desenvolvido por membros da equipe de ensino do  
[Harvard Chan Bioinformatics Core (HBC)](http://bioinformatics.sph.harvard.edu/).  
Licença [Creative Commons Attribution 4.0](https://creativecommons.org/licenses/by/4.0/).*

*Os materiais utilizados nesta lição são adaptados de trabalhos da  
[Data Carpentry](http://datacarpentry.org/), também sob licença CC BY 4.0.*
